{"version":3,"names":["React","useImperativeHandle","useMemo","useRef","forwardRef","useCallback","PixelRatio","StyleSheet","Skia","useDrawCallback","useTouchHandler","PaintStyle","SkiaView","ImageFormat","DEFAULT_BRUSH_COLOR","DEFAULT_ERASER_SIZE","DEFAULT_OPACITY","DEFAULT_STROKE_CAP","DEFAULT_STROKE_JOIN","DEFAULT_THICKNESS","DEFAULT_TOOL","DEFAULT_CANVAS_BACKGROUND_COLOR","DrawingTool","getSvgHelper","convertCorePathsToSkiaPaths","convertCorePathToSkiaPath","convertInnerPathsToStandardPaths","drawPoint","setPaint","Canvas","_ref","ref","color","thickness","opacity","filled","cap","join","initialPaths","style","height","width","eraserSize","tool","onPathsChange","backgroundColor","debug","shareStrokeProperties","touchDisabled","prevPointRef","skiaViewRef","skRectMaxX","skRectMaxY","paths","pathPaint","p","Paint","eraserPoint","x","y","erasing","canvasPaint","setColor","Color","eraserPaint","setStyle","Fill","undo","_skiaViewRef$current","current","pop","length","Math","max","redraw","clear","_skiaViewRef$current2","getPaths","addPath","path","push","addPaths","corePaths","setPaths","splice","getDistance","x1","y1","x2","y2","sqrt","getSvg","getImageSnapshot","_skiaViewRef$current3","xSnapshot","ySnapshot","forEach","_ref2","skRect","computeTightBounds","widthSnapshot","heightSnapshot","image","makeImageSnapshot","getPixelSizeForLayoutSize","data","encodeToBase64","PNG","url","erasingPaths","reversedPaths","reverse","_ref3","index","contains","touchHandler","onStart","_ref4","Eraser","Path","Make","setIsVolatile","paint","Stroke","moveTo","onActive","_ref5","onEnd","onDraw","canvas","info","touches","_ref6","drawPath","_ref7","drawCircle","createElement","styles","skia","create","overflow"],"sourceRoot":"../../src","sources":["Canvas.tsx"],"mappings":"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"}