{"version":3,"names":["React","useImperativeHandle","useMemo","useRef","forwardRef","useCallback","useEffect","StyleSheet","Skia","useDrawCallback","useTouchHandler","PaintStyle","SkiaView","DEFAULT_BRUSH_COLOR","DEFAULT_ERASER_SIZE","DEFAULT_OPACITY","DEFAULT_STROKE_CAP","DEFAULT_STROKE_JOIN","DEFAULT_THICKNESS","DEFAULT_TOOL","DEFAULT_CANVAS_BACKGROUND_COLOR","DrawingTool","getSvgHelper","convertCorePathsToSkiaPaths","convertCorePathToSkiaPath","convertInnerPathsToStandardPaths","drawPoint","setPaint","Canvas","ref","color","thickness","opacity","filled","cap","join","initialPaths","style","height","width","eraserSize","tool","onPathsChange","backgroundColor","debug","shareStrokeProperties","touchDisabled","prevPointRef","skiaViewRef","paths","pathPaint","p","Paint","eraserPoint","x","y","erasing","canvasPaint","setColor","Color","eraserPaint","setStyle","Fill","undo","length","Math","max","current","redraw","clear","getPaths","addPath","path","push","addPaths","corePaths","setPaths","splice","getSvg","erasingPaths","reversedPaths","reverse","forEach","index","contains","touchHandler","onStart","Eraser","Path","Make","setIsVolatile","paint","Stroke","data","moveTo","onActive","onEnd","onDraw","canvas","info","touches","drawPath","drawCircle","styles","skia","create","flex","overflow"],"sourceRoot":"../../src","sources":["Canvas.tsx"],"mappings":"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"}